# 604_day124_建表-DDL语句--DQL-聚合函数-多表查询-03_(掌握)数据库-创建表时添加的表约束_1080p

## 视频来源

https://www.bilibili.com/video/BV1814y1X7Xr?p=24

## AI好记

https://aihaoji.com/zh/dashboard/tasks/view/article/bc34ce43-207e-12c2-5303-0de7a63b2486

## 正文内容

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/079d27f3-99e1-4a6c-ac8a-c69b24ccf590.webp)

[00:00:02 - 00:00:19]

之前讲了创建表时的常见数据类型，字符串用得最多的是`VARCHAR`，超长文本用`TEXT`。今天讲表约束，帮你创建更规范的表。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/9f47399b-7c8b-4483-9715-f4d735d8ff27.webp)

[00:00:21 - 00:00:49]

表约束就是给表加点限制，确保数据符合要求。今天重点讲几种常见约束，让你的表更标准。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/d07d9516-f129-4cfd-8ac3-b208dbe983e3.webp)

[00:00:50 - 00:01:19]

第一个约束是**主键**（`PRIMARY KEY`）。主键是表里一个特殊的字段，用来唯一标识每条记录。视频里“组件”是“主键”的口误，英文是`PRIMARY KEY`（主要的关键）。主键通常写成大写，因为它是SQL关键字。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/397b367d-4325-40b3-84d6-8b5f8049622e.webp)
![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/3dd3afe4-81c2-43a4-b568-0798d219f257.webp)

[00:01:19 - 00:01:42]

服务器返回的数据通常有`id`，比如音乐数据里的`acm`字段，用来保证每条记录的唯一性。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/b832a1b3-da29-4c49-a755-289d7e7d6485.webp)
![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/c3e48a77-c30a-4013-8f1f-f39f1f2f7a14.webp)

[00:01:42 - 00:02:12]

像网易云或爱奇艺的数据，都有`id`字段，确保每条记录唯一。主键的作用是通过这个字段快速找到唯一的数据。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/ff196611-ce10-4664-a5e4-2a2e2822dd64.webp)

[00:02:13 - 00:03:14]

现实中，名字不能保证唯一性，比如多个“小明”，所以用身份证号区分一个人。学校里用学号，哪怕名字相同也能区分。学号记录考试成绩、违纪情况等，标识唯一身份。数据库表也一样，需要一个字段保证每条记录的唯一性。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/2725f701-801c-4adc-8045-946d2fe633c1.webp)

[00:03:14 - 00:03:44]

每张表都需要一个永不重复的字段，通常是`id`，和业务无关，专门用来标识记录。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/6c7e48ff-ed0e-4113-ac46-16d9e1a20e3b.webp)

[00:03:44 - 00:06:00]

主键（`PRIMARY KEY`）的特点：
- 不能重复，确保每条记录唯一。
- 不能为`NULL`（空值），MySQL自动强制`NOT NULL`，即使没写。
- 可以用多列组成**联合主键**（如`name`+`age`），但通常用单列（如`id`）。
- 建议主键用与业务无关的字段，比如`id`，而不是业务字段（如`name`、`height`、`hobbies`），避免业务逻辑干扰。

```sql
-- 主键示例
CREATE TABLE students (
    id INT PRIMARY KEY, -- 主键，不能重复且不能为NULL
    name VARCHAR(20),
    age INT
);
```

---

[00:06:01 - 00:06:35]

主键通常是`id`，和业务无关，比如和学生姓名、身高、年龄没关系。几乎每张表都用`id`作为主键，简单清晰。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/c15c7df4-8404-448c-b157-767cc127ba3e.webp)

[00:06:36 - 00:07:05]

主键是第一个重要约束，后面会演示怎么设置。接下来讲第二个约束：**唯一约束**（`UNIQUE`）。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/95799272-23e8-4e9f-a1c1-7ace353459f4.webp)

[00:07:06 - 00:08:08]

唯一约束（`UNIQUE`）要求字段值不能重复，但可以不是主键。比如用户表里的`username`，不能有重复的用户名，像“张三”用了，别人就不能再用。插入重复值会报错，比如“username already exists”。主键通常是`id`，而`username`用`UNIQUE`保证唯一性。

```sql
-- 唯一约束示例
CREATE TABLE users (
    id INT PRIMARY KEY,
    username VARCHAR(20) UNIQUE -- 用户名不能重复
);
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/dcc4ed7a-f162-4a72-835f-0bc84eb536b1.webp)

[00:08:10 - 00:08:54]

唯一约束适合需要唯一性的字段，比如手机号、身份证号。`UNIQUE`字段的值必须不同，插入重复值会报错。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/62a10deb-8af9-4d7-828c-0a399032129f.webp)

[00:08:54 - 00:09:48]

`UNIQUE`字段允许`NULL`值，且多个`NULL`值不视为重复，因为`NULL`表示“无值”。但可以结合`NOT NULL`要求必须有值，比如用户名必须填且唯一。手机号可能允许`NULL`（用户没填），具体看业务需求，后面项目中会根据业务讲解。

```sql
-- 唯一约束结合NOT NULL示例
CREATE TABLE users (
    id INT PRIMARY KEY,
    username VARCHAR(20) UNIQUE NOT NULL -- 用户名不能重复且必须填
);
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/9f0f7920-9953-4477-9a9d-a482b7dacc26.webp)

[00:09:51 - 00:11:02]

第三个约束是**非空约束**（`NOT NULL`），要求字段必须有值，不能为空。比如`age`字段要求用户插入数据时必须填年龄。另一个是**默认值**（`DEFAULT`），如果没填值，自动用默认值，比如`age`没填默认给`0`。

```sql
-- 非空和默认值示例
CREATE TABLE users (
    id INT PRIMARY KEY,
    name VARCHAR(20) NOT NULL, -- 必须填名字
    age INT DEFAULT 0          -- 没填年龄默认0
);
```

还有个功能（不是约束）叫**自动增长**（`AUTO_INCREMENT`），常用于`id`字段，插入数据时自动递增，比如从1开始每次加1。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/020c054f-efb8-4ac0-be22-5d67fd4eef21.webp)

[00:11:02 - 00:11:22]

`AUTO_INCREMENT`让`id`自动增长，插入数据时不用手动填`id`，数据库会根据当前最大值自动加1，比如插入`name`和`level`，`id`自动生成。

```sql
-- 自动增长示例
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT, -- 自动增长，从1开始
    name VARCHAR(20),
    level INT
);
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250624/bc34ce43-207e-12c2-5303-0de7a63b2486/bb94eee8-7749-4a96-b9ac-3431bae3ca6d.webp)

[00:11:22 - 00:12:17]

`AUTO_INCREMENT`常和主键一起用，简化插入操作。另一个约束是**外键**（`FOREIGN KEY`），用于表与表之间的关系，后面讲多表操作时再详细说明。今天先掌握主键、唯一、非空、默认值和自动增长。

---