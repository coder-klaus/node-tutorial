# 613_day124_建表-DDL语句--DQL-聚合函数-多表查询-12_(掌握)数据库-常见的聚合函数使用_1080p

## 视频来源

https://www.bilibili.com/video/BV1814y1X7Xr?p=33

## AI好记

https://aihaoji.com/zh/dashboard/tasks/view/article/2807a22d-64a7-2940-86a6-993651266c0f

## 正文内容

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/4d4be766-a7a4-48cb-b67e-07864c3dca17.webp)

*00:00:00 - 00:00:30*

### 教学内容

**大白话讲解**：
上午讲了DDL（建表）、DML（增删改）、DQL（查询）语句，重点是DQL的各种查询方法。这些都是SQL的基本语法，不用死记硬背，想复习就看笔记或PPT。接下来讲更高级的内容：聚合函数和多表查询。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/d675faa0-57c8-494f-97e7-b8bcabf8bd72.webp)
![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/0bb1daae-10e5-401b-8390-4db7e4e90050.webp)

*00:00:30 - 00:01:00*

### 教学内容

**大白话讲解**：
DQL的语法包括`SELECT`字段、`FROM`表、`WHERE`条件、`ORDER BY`排序、`LIMIT`分页，这些之前都讲过，直接看笔记就能明白。接下来讲更复杂的内容。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/673ed536-9fe9-4687-abbd-a270840bcad3.webp)
![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/7fcfaf5b-2056-49b0-a103-a740240bae11.webp)

*00:01:00 - 00:01:26*

### 教学内容

**大白话讲解**：
单表操作已经没问题了，但实际开发中数据更复杂，需要汇总数据或查询多张表。比如，统计某品牌手机的数量、平均价格等，这就是聚合函数的作用。还有多表查询，后面会讲。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/5d56feec-3769-4d12-ba0c-0fb3994f2f45.webp)
![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/15a59f1a-0d88-4cd9-963a-afc92b0bcd12.webp)

*00:01:26 - 00:01:52*

### 教学内容

**大白话讲解**：
比如`products`表有很多手机数据，想统计华为手机有多少款。手动数可能知道有23款，但想统计OPPO、小米、苹果等品牌，手动数太麻烦，这时候用聚合函数来汇总。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/a097d56b-7a1e-45fa-a81c-e5f07efd626a.webp)

*00:01:54 - 00:02:23*

### 教学内容

**大白话讲解**：
想知道每个品牌手机数量，比如OPPO、苹果等，手动数不现实。可以用JS代码查所有数据再计算，但SQL的聚合函数可以直接算数量、最大值、最小值、平均值等，效率更高。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/1b612b8d-6a2f-4e23-a9f9-64552350fff5.webp)

*00:02:23 - 00:03:47*

### 教学内容

**大白话讲解**：
SQL提供聚合函数，直接对数据集合进行计算，比如数量、最大值、最小值、平均值等。接下来讲聚合函数的使用。另外，实际开发中常涉及多表查询，单表查不出完整数据，需要多表联合查询。还有多对多关系，数据复杂时用关系表保存关系，这些都会讲到。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/945b39a1-a08e-4c3b-a9c6-413abde4bb1c.webp)

*00:03:47 - 00:04:17*

### 教学内容

**大白话讲解**：
多对多关系需要关系表来保存，查询时更复杂。接下来会讲MySQL高级特性，包括聚合函数、外键、多表查询、连接方式等，后面会通过案例练习。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/42476661-73c2-45ac-bf34-7092e2215596.webp)

*00:04:17 - 00:04:47*

### 教学内容

**大白话讲解**：
这节课重点讲：1. 聚合函数，对数据集合做计算；2. 外键，表间关系；3. 多表查询，从多表查数据；4. 连接方式（左连接、右连接、内连接）；5. 多对多关系和关系表；6. 多表查询数据。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/822cb8d8-2b4d-454f-9114-7ca1dbfe1654.webp)

*00:04:48 - 00:05:48*

### 教学内容

**大白话讲解**：
外键在建表时定义，后面会讲。多表查询是从多张表查数据，连接方式有左连接、右连接、内连接等。还讲多对多关系如何用关系表关联，以及如何从多表查数据。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/420ccc53-d391-4987-a85f-f86e7bdda47f.webp)

*00:05:48 - 00:06:17*

### 教学内容

**大白话讲解**：
这些内容会通过案例练习，项目中也会用到。接下来重点讲聚合函数，聚合函数是对一组数据（集合）进行计算，比如平均值、最大值等。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/e350af5d-35b6-4b08-844f-3ed0a6ed735d.webp)

*00:06:17 - 00:07:04*

### 教学内容

**大白话讲解**：
聚合函数是对一组数据（集合）整体操作，比如算平均值、最大值等。官方定义有点抽象，简单说就是先查出一组数据，再对这组数据用函数计算。接下来用例子演示常用聚合函数。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/294dd9fa-204b-4de8-b293-efe18039f955.webp)

*00:07:04 - 00:07:16*

### 教学内容

**大白话讲解**：
比如想查华为手机的数量，用聚合函数直接算。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/5cbeffaf-5385-41fe-975b-3807c5c53e64.webp)

*00:07:16 - 00:07:50*

### 教学内容

**大白话讲解**：
想算华为手机的平均价格，手动加起来再除太麻烦。聚合函数可以直接对查出的数据集合算平均值，简单高效。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/4d3e31ee-90f7-4262-8c51-1934e5c79dc5.webp)

*00:07:50 - 00:07:58*

### 教学内容

**大白话讲解**：
接下来通过案例演示聚合函数的使用。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/65052c43-197d-430a-b03a-158edaa6a2c5.webp)

*00:07:58 - 00:09:56*

### 教学内容

**大白话讲解**：
需求：算华为手机的平均价格。SQL用`SELECT`查，不是查具体字段（如`id`、`title`），而是用聚合函数算平均值。从`products`表查，条件是`WHERE brand = '华为'`，结果是平均价格。

### 代码示例

```sql
SELECT AVG(price) FROM products WHERE brand = '华为';
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/6b9a3559-a990-426c-a681-b0053b32755d.webp)

*00:09:56 - 00:11:10*

### 教学内容

**大白话讲解**：
不是查单个价格，而是对华为手机所有价格算平均值。用`AVG(price)`函数，查出华为手机的价格集合，计算平均值，返回结果。

### 代码示例

```sql
SELECT AVG(price) FROM products WHERE brand = '华为';
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/69ebb6df-71a2-4e7c-b970-732513df382d.webp)

*00:11:10 - 00:11:39*

### 教学内容

**大白话讲解**：
用`AVG(price)`算华为手机平均价格，运行后直接返回结果。`AVG`是对价格集合操作，得出平均值。

### 代码示例

```sql
SELECT AVG(price) FROM products WHERE brand = '华为';
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/ec446c91-6c5f-473f-90b2-0b5ad7be5505.webp)

*00:11:39 - 00:11:58*

### 教学内容

**大白话讲解**：
运行后得到平均价格，可以用代码（如JS的`toFixed`）保留小数位，后面自己试。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/dff90c10-6df8-4455-bd9e-6aa4756d4e2f.webp)

*00:11:58 - 00:12:35*

### 教学内容

**大白话讲解**：
聚合函数的核心是先查出一组数据（集合），再用函数操作，比如算平均值。接下来看另一个需求：算华为手机的平均评分。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/b1ec09f9-1fd5-4613-81a0-a8ec230c1b7a.webp)

*00:12:35 - 00:12:37*

### 教学内容

**大白话讲解**：
表里有`score`字段，想算华为手机的平均评分。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/4db25614-1e73-4d48-adba-bfc4f866d3cd.webp)

*00:12:37 - 00:13:24*

### 教学内容

**大白话讲解**：
算小米手机的平均评分，用`SELECT AVG(score) FROM products WHERE brand = '小米'`，查出小米手机的评分集合，算平均值。

### 代码示例

```sql
SELECT AVG(score) FROM products WHERE brand = '小米';
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/4a83ef80-87c3-4f4a-8b57-12c6fa4640fb.webp)

*00:13:24 - 00:13:27*

### 教学内容

**大白话讲解**：
运行后得到小米手机的平均评分。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/8c670ca5-c984-4ba7-a0e9-4400efb11805.webp)

*00:13:27 - 00:14:02*

### 教学内容

**大白话讲解**：
结果列名不好看，可以用`AS`起别名，比如`SELECT AVG(score) AS 小米平均评分`，更直观。

### 代码示例

```sql
SELECT AVG(score) AS 小米平均评分 FROM products WHERE brand = '小米';
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/041a8744-c834-41c7-9465-be6b93511278.webp)

*00:14:02 - 00:14:38*

### 教学内容

**大白话讲解**：
想找所有手机中评分最高或最低的，用聚合函数`MAX`或`MIN`。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/b6dff007-889b-4b24-a907-42e6c98ca04d.webp)

*00:14:38 - 00:15:11*

### 教学内容

**大白话讲解**：
查最高评分，用`SELECT MAX(score) FROM products`，对所有手机的评分集合算最大值。

### 代码示例

```sql
SELECT MAX(score) FROM products;
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/737eca0f-34ce-48d1-a3e4-8838e7a8f271.webp)

*00:15:11 - 00:15:20*

### 教学内容

**大白话讲解**：
运行后得到最高评分，比如9.7。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/cb25870a-41e6-4b63-a2b5-40a58c9ec42a.webp)

*00:15:20 - 00:16:33*

### 教学内容

**大白话讲解**：
查最低评分用`MIN(score)`，比如`SELECT MIN(score) FROM products`，得到4.6。不能直接加`title`字段查具体手机，因为聚合函数返回单个值（比如最高分），加`title`可能返回错误的第一条数据。

### 代码示例

```sql
SELECT MIN(score) FROM products;
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/da3d164e-fc74-4245-bd9d-bdb02771d94f.webp)

*00:16:34 - 00:17:04*

### 教学内容

**大白话讲解**：
聚合函数能算最高最低分，但不知道是哪款手机，需用子查询（后面讲）来查具体手机。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/3da91bf7-b9e8-4b84-8fe8-dbed8eb406c1.webp)
![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/44a5c5cc-edd9-42ad-8464-475461a7383d.webp)
![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/d72db0c6-0fa4-446c-a0be-bef33f70c7ee.webp)

*00:17:04 - 00:17:34*

### 教学内容

**大白话讲解**：
先掌握聚合函数，子查询后面讲。项目中会补充如何把查询结果转为JSON返回客户端。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/ff5c8dfb-d147-4f5f-bb74-5edc9f7a1584.webp)

*00:17:34 - 00:18:04*

### 教学内容

**大白话讲解**：
常用聚合函数有`AVG`（平均值）、`MAX`（最大值）、`MIN`（最小值）。接下来讲`SUM`和`COUNT`。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/2fa01178-b6c9-4e26-ad15-61df693d4354.webp)
![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/0ab207bc-1338-45d9-8dc6-a53fb0524d92.webp)

*00:18:06 - 00:18:35*

### 教学内容

**大白话讲解**：
需求：算所有手机的总投票数（`vote_cnt`），用`SUM`函数对投票数集合求和。

### 代码示例

```sql
SELECT SUM(vote_cnt) FROM products;
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/8a9d2788-c813-45c8-9c48-12fd70b08e2f.webp)

*00:18:37 - 00:19:37*

### 教学内容

**大白话讲解**：
`SUM(vote_cnt)`算出所有手机的总投票数，比如3万多。另一个需求：算商品总数，用`COUNT`函数。

### 代码示例

```sql
SELECT COUNT(*) FROM products;
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/f07f2538-c361-40a5-bb60-44e26a1b572e.webp)

*00:19:37 - 00:20:07*

### 教学内容

**大白话讲解**：
`COUNT(*)`算所有记录数，`*`表示所有行。可以用`COUNT(id)`，但`COUNT(title)`可能不准，因为`title`可能为空，空值不计入。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/e596661d-757c-4a56-b568-9fb7fff2ead8.webp)

*00:20:07 - 00:21:08*

### 教学内容

**大白话讲解**：
`SELECT COUNT(*) FROM products`算总记录数，比如108条。算华为手机数量，加`WHERE brand = '华为'`，结果是23条。聚合函数先查出集合，再操作（平均、最大、最小、求和、计数）。

### 代码示例

```sql
SELECT COUNT(*) FROM products WHERE brand = '华为';
```

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/a171bf6e-1c0c-4096-93c8-ee2ebfcb0699.webp)
![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/1b179b3a-567f-4349-89b1-7accfced413c.webp)

*00:21:08 - 00:21:38*

### 教学内容

**大白话讲解**：
常用聚合函数（`AVG`、`MAX`、`MIN`、`SUM`、`COUNT`）讲完了，后面项目中会讲结果转JSON等内容，先保存视频。

---

![](https://pic.aihaoji.com/user_cf07d812-ef26-8550-a50d-768cff660798/img/20250626/2807a22d-64a7-2940-86a6-993651266c0f/e8b1321d-7e32-4e6b-93da-f1ccca12b903.webp)

*00:21:38 - 00:21:38*

### 教学内容

**大白话讲解**：
聚合函数内容讲完，视频保存。

---