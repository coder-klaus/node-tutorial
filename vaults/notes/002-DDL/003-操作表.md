## 查看表

```sql
-- 查看所有的表
SHOW TABLES;

-- 查看表结构 => desc是description的缩写
DESC t_singer;
```



## 删除表

```sql
-- 删除表
DROP TABLE t_singer;

-- 表存在再删除，否则会报错
-- drop => 下降、停止、放弃
DROP TABLE IF EXISTS t_singer;
```



## 创建表

### 基本方式

1. 字段和类型之间使用空格分割
2. 字段和字段之间使用逗号分割
3. 最后的字段最后的逗号一般省略

```sql
CREATE TABLE IF NOT EXISTS t_singer (
  name VARCHAR(10),
  age INT
);
```



### 约束条件

```sql
CREATE TABLE t_singer (
  -- PRIMARY KEY => 主键 「 数据少可以用INT，数据变多可以改用BIGINT 」
	-- AUTO_INCREMENT 表示 自动递增 「 这个字段约束没有提示，需要纯手打 」
  -- 		+ 每次插入新记录，字段会自动从1开始递增（1, 2, 3...），不用手动填写
  -- 		+ 只有 主键 和 索引 可以设置 自动增长
  --    + 如果数据被删除，自动增长不会回退，会从之前索引值的基础上继续递增
	id INT PRIMARY KEY AUTO_INCREMENT,
	-- UNIQUE 数据值必须唯一
	-- NOT NULL 表示值不能为空
  -- NULL 表示值可以为空
	name VARCHAR(20) UNIQUE NOT NULL,
	-- DEFAULT 设置默认值 「 SQL默认的默认值为 NULL 」
	level INT DEFAULT 0,
  -- UNIQUE 数据值必须唯一
  -- UNIQUE表示插入的值必须唯一，但不包括系统默认值 NULL
  -- 也就是说 数据可以不插入，但如果插入则值必须唯一 => 而没有插入的数据，他们默认值都是NULL
  
  -- 即 UNIQUE字段允许NULL值，且多个NULL值不视为重复，因为NULL表示“无值” 
  -- UNIQUE 可以结合NOT NULL要求必须有值
	telPhone VARCHAR(20) UNIQUE -- 电话使用字符串是因为可能存在 +86 这种国家前缀
);
```

向上边 `PRIMARY KEY`、`UNIQUE` 这类非字段名、非数据类型的关键字，被称之为约束条件，用于限制可以插入的值的类型

SQL能进行的约束非常有限，推荐在前后端就完成了完备的数据校对，仅把校对完的数据插入数据库中

而表约束有可以分为

+ 表约束 => 约束整个表结构 => 主键、外键、索引
+ 字段约束 => 约束某个字段值 => 除 主键、外键、索引 之外的约束都是字段约束



### 自动更新值

```sql
CREATE TABLE t_singer (
	id INT PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(20) UNIQUE NOT NULL,
	telPhone VARCHAR(20) UNIQUE,
  -- CURRENT_TIMESTAMP 代表当前的时间戳，实际是 TIMESTAMP 类型值
  -- DEFAULT CURRENT_TIMESTAMP 表示默认值为插入时间
  -- ON UPDATE CURRENT_TIMESTAMP 表示当记录发生更新时,  update_time 字段会自动更新为当前时间戳
  update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;
);
```



#### 主键

主键（PRIMARY KEY）是表中最重要的约束，用于保证每条数据的唯一性，并能快速定位记录。

主键的特点：

- 不可重复，确保记录唯一。
- 不允许为NULL，MySQL会自动加NOT NULL，即使未显式声明。
- 可由多列组成联合主键（如name+age），但通常用单列（如id）。
- 建议主键使用与业务无关的字段（如id），避免用业务字段（如name、height、hobbies），以防业务变动影响主键。



表可以不设置主键，但极不推荐。InnoDB存储引擎「 MySQL的底层存储引擎 」会按以下规则创建隐式主键：

1. 使用第一个被定义为唯一（UNIQUE）且非空（NOT NULL）的字段；
2. 若没有唯一且非空的字段，则底层生成一个不可见、不可操作的唯一主键。

创建隐式主键虽然技术上可行，但这种做法高度依赖数据库实现，不同数据库可能有不同处理方式，风险极高且不可控。



## 修改表

如果对表结构不满意，可以用ALTER TABLE来改表结构，比如字段名、类型或约束

`ALTER`  的语法格式为  `ALTER TABLE <表名> <操作指令> <参数列表>



在实际开发中，不建议频繁修改表结构。如有必要，应尽量设置默认值或允许为NULL，避免对已有数据造成影响。

简单来说，加字段这种操作还是比较常见的，但其余修改表的操作「 如修改字段类型，字段改名等 」应尽可能避免，最好建表时就想好。



> Navicat 有时候修改后看不到最新效果，或者自定义标识没有提示，这时候可以这样解决：
>
> 1. 关闭当前页签再重新打开  
> 2. 右键点击刷新



### 改名

```sql
-- 修改表名
ALTER TABLE `user` RENAME TO `t_user`;
```



### 新增

```sql
-- 新增字段 
-- create at 不是合法字段，因为字段中存在空格这种特殊字符，需要使用反引号进行包裹
-- 因此推荐 在SQL中的自定义标识使用下划线命名法
ALTER TABLE t_singer ADD `create at` TIMESTAMP;
```

```sql
-- 新增字段
-- ALTER TABLE <表名> ADD <字段名> <字段约束>;
ALTER TABLE t_user ADD crteate_at DATETIME DEFAULT CURRENT_TIMESTAMP;
```



### 修改

```sql
-- 修改字段
-- ALTER TABLE <表名> CHANGE <旧字段名> <新字段名> <类型约束>;
-- 1. 新旧字段 可以同名 => 例如 在修改字段类型 或 约束的时候
-- 2. 类型 和 约束 可以和之前一致 => 例如 仅修改字段名的时候

-- 也就是说 CHANGE 即可以改名，也可以改类型 和 约束
-- 1. 其中 类型 和 新旧字段名 是必填的，不能省略
-- 2. 而 字段约束是可以省略的，如果省略了，将使用默认约束覆盖用户自定义约束，从而起到移除用户自定义约束的效果 
ALTER TABLE t_user CHANGE level score float DEFAULT 0; 
```

```sql
-- 如果只是修改字段类型或者修改字段约束，可以之间使用 MODIFY 关键字
ALTER TABLE t_user MODIFY id BIGINT;
```

```sql
-- 无论是 CHANGE 还是 MODIFY 都只能移除字段级别的约束
-- 如果是表约束，如主键等，就只能通过 DROP 「 不推荐 」
ALTER TABLE t_user DROP PRIMARY KEY;
```

> 注意 ⚠️
>
> 修改字段类型时，可能会出现新旧类型不兼容的情况。
>
> 最稳妥的方式是新建一个字段，迁移旧字段的数据到新字段，确认无误后再删除旧字段。

### 删除

```sql
-- 删除字段
ALTER TABLE t_user DROP score;
```

