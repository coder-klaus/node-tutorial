`GROUP BY`的功能是分组，也就是把数据按照某种规则分成不同的组，然后对每组数据进行处理

默认是把所有查询出来的数据看成一整组

GROUP BY通常跟聚合函数一起用，因为它本身就是为了分组后做统计用的。平常的查询（不涉及统计）一般不需要GROUP BY。

```sql
-- 从products表里查数据，按brand字段分组，
-- 每组算出最高价格（MAX(price)）、最低价格（MIN(price)）和平均价格（AVG(price)）。
SELECT brand, 
			 MAX(price) AS max_price, 
			 MIN(price) AS min_price, 
			 AVG(price) AS avg_price, 
			 AVG(score) AS avg_score
FROM products
GROUP BY brand;
```



## 分组约束

WHERE是用来过滤原始数据的，而HAVING是用来过滤分组后聚合函数算出来的结果。

简单说，WHERE在分组前用，HAVING在分组后用。

```sql
-- 返回平均评分大于7分的品牌
SELECT brand, AVG(score) AS avg_score
FROM products
GROUP BY brand
HAVING AVG(score) > 7;
```

